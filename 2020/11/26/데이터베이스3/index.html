<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>데이터 베이스 Functions | Jaime's blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.0.2"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">데이터 베이스 Functions</h1><a id="logo" href="/.">Jaime's blog</a><p class="description">Front end engineer</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">데이터 베이스 Functions</h1><div class="post-meta">2020-11-26<span> | </span><span class="category"><a href="/categories/js/">js</a></span></div><div class="post-content"><h2 id="Functions-concat-ceil-round-truncate-date-format"><a href="#Functions-concat-ceil-round-truncate-date-format" class="headerlink" title="Functions (concat, ceil, round, truncate, date_format)"></a>Functions (concat, ceil, round, truncate, date_format)</h2><h3 id="CEIL"><a href="#CEIL" class="headerlink" title="CEIL"></a>CEIL</h3><p>ceil : 실수 데이터를 올림할 때 사용한다.  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select ceil (12.345); # 13</span><br></pre></td></tr></table></figure>

<p>ceil은 소수점 몇 째 자리라는 개념이 없다. 만약 ceil을 사용해서 소수 둘째자리 올림을 하고 싶다면 다음과 같이 작성해야 한다.  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 100을 곱해서 1234.5 라는 숫자를 만들고 올림한후 다시 나누어준다.</span><br><span class="line">select ceil(12.345 * 100) &#x2F; 100</span><br></pre></td></tr></table></figure>





<h3 id="ROUND"><a href="#ROUND" class="headerlink" title="ROUND"></a>ROUND</h3><p>round : 실수 데이터를 반올림할 떄 사용한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 12.345를 소수 둘째자리까지 나타내고 소수 셋째 자리에서 반올림한다.</span><br><span class="line">select round(12.345, 2);</span><br></pre></td></tr></table></figure>

<p>ex) 국가별 언어 사용 비율을 소수 첫째 자리에서 반올림해서 정수로 나타냄</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select countrycode, language, percentage, ROUND(percentage, 0)</span><br><span class="line">from countrylanguage;</span><br></pre></td></tr></table></figure>



<h3 id="TRUNCATE"><a href="#TRUNCATE" class="headerlink" title="TRUNCATE"></a>TRUNCATE</h3><p>truncate : 실수 데이터를 버림할 때 사용한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 12.345를 소수 둘째 자리까지 나타내고 소수 셋째자리에서 버림한다.</span><br><span class="line">select truncate(12.345, 2)</span><br></pre></td></tr></table></figure>

<p>ex) 국가별 언어 사용 비율을 소수 첫번째 자리에서 버림하여 정수로 나타냄</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select countrycode, language, percentage, truncate(percentage, 0)</span><br><span class="line">from countrylanguage;</span><br></pre></td></tr></table></figure>



<h3 id="DATE-FORMAT"><a href="#DATE-FORMAT" class="headerlink" title="DATE_FORMAT"></a>DATE_FORMAT</h3><p>date_format : 날짜 데이터에 대한 포맷을 바꿔준다.</p>
<p>다음은 date와 관련된 링크이다.</p>
<p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html">https://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># sakila 데이터 베이스에서 월별 총 수입</span><br><span class="line">select DATE_FORMAT(payment_date, &quot;%Y-%m&quot;) as monthly, sum(amount) as amount</span><br><span class="line">from payment</span><br><span class="line">group by monthly;</span><br></pre></td></tr></table></figure>

<p>만약 데이트 포맷을 정해주지 않는다면 시, 분, 초까지 비교해서 같은 것들끼리 합쳐진다.</p>
<p>년, 월만 같은 것끼리 그룹하고 싶다면 date_format을 정해줘야한다.</p>
<h2 id="Functions-2-IF-IFNULL-CASE"><a href="#Functions-2-IF-IFNULL-CASE" class="headerlink" title="Functions 2 (IF, IFNULL, CASE)"></a>Functions 2 (IF, IFNULL, CASE)</h2><p>SQL에서도 다른 언어에서 처럼 조건문 사용이 가능하다.</p>
<h3 id="IF"><a href="#IF" class="headerlink" title="IF"></a>IF</h3><p>if : 조건을 주고 참, 거짓에 따라 다르게 출력해줄 수 있다.</p>
<p>ex) 도시의 인구가 100만이 넘으면 “big city” 그렇지 않으면 “small city”를 출력하는 city_scale 컬럼을 추가</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select name, population, if(population &gt; 1000000, &quot;big city&quot;, &quot;small city&quot;) as city_scale</span><br><span class="line">from city;</span><br></pre></td></tr></table></figure>



<h3 id="IFNULL"><a href="#IFNULL" class="headerlink" title="IFNULL"></a>IFNULL</h3><p>ifnull : 데이터 값이 null인 컬럼이 있다면 원하는 값으로 교체할 수 있다.</p>
<p>ex) 독립년도가 없는 데이터는 0으로 출력</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select indepyear, ifnull(indepyear, 0) as indepyear</span><br><span class="line">from country;</span><br></pre></td></tr></table></figure>



<h3 id="CASE"><a href="#CASE" class="headerlink" title="CASE"></a>CASE</h3><blockquote>
<p>case</p>
<p>​    when (조건1) then (출력1)</p>
<p>​    when (조건2) then (출력2)</p>
<p>END AS (컬럼명)</p>
</blockquote>
<p>ex) 나라별로 인구가 10억 이상, 1억 이상, 1억 이하인 컬럼을 추가하여 출력</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select name, population,</span><br><span class="line">    case</span><br><span class="line">        when population &gt; 100000000 then &#39;upper 1 bilion&#39;</span><br><span class="line">        when population &gt; 10000000 then &#39;upper 100 milion&#39;</span><br><span class="line">        else &#39;below 100 milion&#39;</span><br><span class="line">    end as result</span><br><span class="line">from country;</span><br></pre></td></tr></table></figure>



<h2 id="JOIN"><a href="#JOIN" class="headerlink" title="JOIN"></a>JOIN</h2><p>join : 여러 개의 테이블에서 데이터를 모아서 보여줄 때 사용된다. join에는 inner join, left join, right join이 있다.</p>
<ul>
<li>MAKE TEST TABLE &amp; DATA</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE user (</span><br><span class="line">    user_id int(11) unsigned NOT NULL AUTO_INCREMENT,</span><br><span class="line">    name varchar(30) DEFAULT NULL,</span><br><span class="line">    PRIMARY KEY (user_id)</span><br><span class="line">) ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8;</span><br><span class="line"></span><br><span class="line">CREATE TABLE addr (</span><br><span class="line">     id int(11) unsigned NOT NULL AUTO_INCREMENT,</span><br><span class="line">     addr varchar(30) DEFAULT NULL,</span><br><span class="line">    user_id int(11) DEFAULT NULL,</span><br><span class="line">     PRIMARY KEY (id)</span><br><span class="line">) ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8;</span><br><span class="line"></span><br><span class="line">INSERT INTO user(name)</span><br><span class="line">VALUES (&quot;jin&quot;),</span><br><span class="line"> (&quot;po&quot;),</span><br><span class="line"> (&quot;alice&quot;),</span><br><span class="line"> (&quot;petter&quot;);</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">INSERT INTO addr(addr, user_id)</span><br><span class="line">VALUES (&quot;seoul&quot;, 1),</span><br><span class="line">     (&quot;pusan&quot;, 2),</span><br><span class="line">     (&quot;deajeon&quot;, 3),</span><br><span class="line">     (&quot;deagu&quot;, 5),</span><br><span class="line">     (&quot;seoul&quot;, 6); </span><br></pre></td></tr></table></figure>



<h3 id="INNER-JOIN"><a href="#INNER-JOIN" class="headerlink" title="INNER JOIN"></a>INNER JOIN</h3><p>두 테이블 사이에 공통된 값이 없는 row는 출력하지 않는다.</p>
<p>ex) 두 테이블을 합쳐 id, name, addr 출력</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select id, user.name, addr.addr</span><br><span class="line">from user</span><br><span class="line">join addr</span><br><span class="line">on user.user_id &#x3D; addr.user_id;</span><br><span class="line">-- user 테이블을 기준으로 addr 테이블을 합치겠다.</span><br></pre></td></tr></table></figure>

<p>ex) world 데이터 베이스에서 도시이름과 국가이름을 출력</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select city.name as city_name, country.name as country_name</span><br><span class="line">from city</span><br><span class="line">join country</span><br><span class="line">on city.countrycode &#x3D; country.code</span><br></pre></td></tr></table></figure>

<p>위 문제를 where를 사용해서 나타낼 수 도 있다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select city.name as city_name, country.name as country_name</span><br><span class="line">from city, country</span><br><span class="line">where city.countrycode &#x3D; country.code</span><br></pre></td></tr></table></figure>



<h3 id="LEFT-JOIN"><a href="#LEFT-JOIN" class="headerlink" title="LEFT JOIN"></a>LEFT JOIN</h3><p>왼쪽 테이블을 기준으로 왼쪽 테이블의 모든 데이터가 출력되고 매핑되는 키값이 없으면 NULL로 출력된다.</p>
<p>ex) 두 테이블을 합쳐 id, name, addr 출력</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select id, user.name, addr.addr</span><br><span class="line">from user</span><br><span class="line">left join addr</span><br><span class="line">on user.user_id &#x3D; addr.user_id;</span><br></pre></td></tr></table></figure>



<h3 id="RIGHT-JOIN"><a href="#RIGHT-JOIN" class="headerlink" title="RIGHT JOIN"></a>RIGHT JOIN</h3><p>오른쪽 테이블을 기준으로 왼쪽 테이블의 모든 데이터가 출력되고 매핑되는 키값이 없으면 NULL로 출력된다.</p>
<p>ex) 두 테이블을 합쳐 id, name, addr 출력</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select id, user.name, addr.addr</span><br><span class="line">from user</span><br><span class="line">right join addr</span><br><span class="line">on user.user_id &#x3D; addr.user_id;</span><br></pre></td></tr></table></figure>

<img width="1069" alt="스크린샷 2020-11-26 오후 8 59 34" src="https://user-images.githubusercontent.com/61978339/100348539-6408f380-302a-11eb-9b83-8228bb06fd70.png">



<h3 id="JOIN-연습문제"><a href="#JOIN-연습문제" class="headerlink" title="JOIN 연습문제"></a>JOIN 연습문제</h3><ol>
<li>지역과 대륙별 사용하는 언어 출력</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select distinct country.region, country.continent, countrylanguage.language</span><br><span class="line">from country</span><br><span class="line">join countrylanguage</span><br><span class="line">on countrylanguage.countrycode &#x3D; country.code;</span><br></pre></td></tr></table></figure>



<ol start="2">
<li>대륙과 지역별 사용하는 언어의 수 출력</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select sub1.region, sub1.continent, count(*) as count</span><br><span class="line">from (</span><br><span class="line">    select distinct countrh.region, country.continent, countrylanguage.language</span><br><span class="line">  from country</span><br><span class="line">  join countrylanguage</span><br><span class="line">  on countrylanguage.countrycode &#x3D; country.code</span><br><span class="line">) as sub1</span><br><span class="line">group by sub1.region, sub1.continent;</span><br></pre></td></tr></table></figure>



<ol start="3">
<li>국가별, 도시별 언어의 사용율(테이블 세개 조인하기)</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select city.name, city.countrycode, country.name, country.code, countrylanguage.language</span><br><span class="line">    , countrylanguage.percentage</span><br><span class="line">from city</span><br><span class="line">join country</span><br><span class="line">on    country.code &#x3D; city.countrycode</span><br><span class="line">join countrylanguage</span><br><span class="line">on countrylanguage.countrycode &#x3D; country.code;</span><br></pre></td></tr></table></figure>



<h3 id="UNION"><a href="#UNION" class="headerlink" title="UNION"></a>UNION</h3><p>union은 select 문의 결과 데이터를 하나로 합쳐서 출력한다. 단, 컬럼의 개수와 타입, 순서가 같아야 한다.</p>
<p>union은 자동으로 distinct를 하여 중복을 제거해준다. 중복제거를 안하고 컬럼 데이터를 합치고 싶으면  union all을 사용한다.</p>
<p>또한 union을 이용하면 Full Outer Join을 구현할 수 있다.</p>
<p>ex) user 테이블의 name 컬럼과 addr 테이블의 addr 컬럼의 데이터를 하나로 합쳐서 출력</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select name</span><br><span class="line">from user</span><br><span class="line">union</span><br><span class="line">select addr</span><br><span class="line">from addr</span><br></pre></td></tr></table></figure>



<h3 id="UNION-ALL"><a href="#UNION-ALL" class="headerlink" title="UNION ALL"></a>UNION ALL</h3><p>ex) 중복데이터를 제거하지 않고 결과 데이터 합쳐서 출력</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select name</span><br><span class="line">from user</span><br><span class="line">union all</span><br><span class="line">select addr</span><br><span class="line">from addr;</span><br></pre></td></tr></table></figure>



<h3 id="FULL-OUTER-JOIN"><a href="#FULL-OUTER-JOIN" class="headerlink" title="FULL OUTER JOIN"></a>FULL OUTER JOIN</h3><p>ex) union을 이용하여 full outer join 구현</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select id, user.name, addr.addr</span><br><span class="line">from user</span><br><span class="line">left join addr</span><br><span class="line">on user.user_id &#x3D; addr.user_id</span><br><span class="line">union</span><br><span class="line">select id, user.name, addr.addr</span><br><span class="line">from user</span><br><span class="line">right join addrr</span><br><span class="line">on user.user_id &#x3D; addr.user_id</span><br></pre></td></tr></table></figure>





<h2 id="Sub-Query"><a href="#Sub-Query" class="headerlink" title="Sub Query"></a>Sub Query</h2><p>sub query는 query 문 안에 있는 query를 의미한다. select절, from절, where절 등에 사용이 가능하다.</p>
<p>ex) 전체 나라수, 전체 도시수, 전체 언어수를 출력 (select 절에 사용)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select</span><br><span class="line">    (select count(name) from city) as total_city,</span><br><span class="line">    (select count(name) from country) as total_country,</span><br><span class="line">    (select count(distinct(language)) from countrylanguage) as language</span><br><span class="line">from dual;</span><br></pre></td></tr></table></figure>

<p>ex) 800만 이상이 되는 도시의 국가코드, 이름, 도시인구수를 출력 (from 절에 사용)  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select *</span><br><span class="line">from (</span><br><span class="line">  select countrycode, name, population</span><br><span class="line">  from city</span><br><span class="line">    where population &gt;&#x3D; 8000000</span><br><span class="line">)</span><br><span class="line">join (select code, name from country) as country</span><br><span class="line">on city.countrycode &#x3D; country.code;</span><br></pre></td></tr></table></figure>

<p>ex) 800만 이상 도시의 국가코드, 국가이름, 대통령 이름을 출력 (where 절에 사용)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select code, name, headofstate</span><br><span class="line">from country</span><br><span class="line">where (</span><br><span class="line">    select distinct(countrycode) from city where population &gt; 8000000</span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<h2 id="VIEW"><a href="#VIEW" class="headerlink" title="VIEW"></a>VIEW</h2><p>가상 테이블로 데이터만 보고자 할때 사용한다. 실제 데이터를 메모리에 저장하고 있지는 않다. 한마디로 특정 컬럼의 데이터를 보여주는 역할만 한다. 뷰를 사용함으로 쿼리를 더 단순하게 만들 수 있다. 한번 생성된 뷰는 수정이 불가능하며 인덱스 설정이 불가능하다. </p>
<h3 id="Syntax"><a href="#Syntax" class="headerlink" title="Syntax"></a>Syntax</h3><blockquote>
<p>CREATE VIEW &lt;뷰 이름&gt; AS</p>
<p>(QUERY)</p>
</blockquote>
<p>ex) 국가 코드와 국가 이름이 있는 뷰 생성</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create view code_name as</span><br><span class="line">select code, name</span><br><span class="line">from country;</span><br></pre></td></tr></table></figure>



<p>ex) city 테이블에 국가 이름 추가</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select *</span><br><span class="line">from city</span><br><span class="line">join code_name</span><br><span class="line">on city.countrycode &#x3D; code_name.code;</span><br></pre></td></tr></table></figure>





<h2 id="INDEX"><a href="#INDEX" class="headerlink" title="INDEX"></a>INDEX</h2><p>테이블에서 데이터를 검색할 때 빠르게 찾을 수 있도록 해주는 기능이다.</p>
<ul>
<li>장점 : 검색속도가 빨라짐</li>
<li>단점 <ul>
<li>저장공간을 10% 정도 더 많이 차지</li>
<li>INSERT, DELETE, UPDATE 할때 속도가 느려짐</li>
</ul>
</li>
<li>사용법  :  SELECT시 WHERE 절에 들어가는 컬럼을 Index로 설정하면 좋다.</li>
<li>내부 작동 원리(B-Tree) : 루프노드와 리프노드의 계층적 구조로 루트노드를 이용하여 리프노드에서의 데이터를 빠르게 찾을 수 있는 자료구조 알고리즘</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># employees 데이터 베이스에서 실행</span><br><span class="line"># 실행계획을 확인하여 인덱스를 사용하는지 확인</span><br><span class="line">explain</span><br><span class="line">select *</span><br><span class="line">from salaries</span><br><span class="line">where from_date &lt; &quot;1986-01-01&quot;;</span><br><span class="line"></span><br><span class="line">explain</span><br><span class="line">select *</span><br><span class="line">from salaries</span><br><span class="line">where to_date &lt; &quot;1986-01-01&quot;;</span><br></pre></td></tr></table></figure>



<ol>
<li>인덱스 확인</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show index from salaries;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>인덱스 생성</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create index fdate</span><br><span class="line">on salaries (from_date);</span><br><span class="line"></span><br><span class="line">create index tdate</span><br><span class="line">on salaries (to_date);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>여러 개의 컬럼을 가지는 인덱스 생성도 가능</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create index ftdate</span><br><span class="line">on salaries (from_date, to_date);</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>인덱스 삭제</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">drop index fdate</span><br><span class="line">on salaries</span><br><span class="line"></span><br><span class="line">drop index tdate</span><br><span class="line">on salaries</span><br><span class="line"></span><br><span class="line">drom index ftdate</span><br><span class="line">on salaries</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>여러 개의 컬럼을 조건으로 where절에 사용하는 경우 인덱스 확인</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 인덱스가 하나의 컬럼에 있을때보다 둘다 있을 때가 더 빠르다.</span><br><span class="line">explian</span><br><span class="line">select *</span><br><span class="line">from salaries</span><br><span class="line">where from_date &lt; &quot;1985-01-01&quot; and to_date &lt; &quot;1986-01-01&quot;;</span><br></pre></td></tr></table></figure>



<h2 id="TRIGGER"><a href="#TRIGGER" class="headerlink" title="TRIGGER"></a>TRIGGER</h2><p>특정 테이블을 감시하고 있다가 설정한 조건에 감지되면 지정해 놓은 쿼리가 자동으로 실행되도록 하는 방법</p>
<h3 id="Syntax-1"><a href="#Syntax-1" class="headerlink" title="Syntax"></a>Syntax</h3><blockquote>
<p>CREATE TRIGGER trigger_name</p>
<p>{BEFORE | AFTER} {INSERT | UPDATE | DELETE}</p>
<p>on table_name FOR EACH ROW</p>
<p>BEGIN</p>
<p>​    trigger_body;</p>
<p>END;</p>
</blockquote>
<p>ex) 데이터를 삭제하면 다른 테이블에 백업하는 트리거 생성</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create database tr;</span><br><span class="line">use tr;</span><br><span class="line"></span><br><span class="line">create table chat(</span><br><span class="line">    id VARCHAR(20),</span><br><span class="line">  answer VARCHAR(32) NOT NULL</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table chatBackup (</span><br><span class="line">    idBackup VARCHAR(32),</span><br><span class="line">  answerBackup VARCHAR(32) NOT NULL</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 트리거 설정</span><br><span class="line">delimiter |</span><br><span class="line">    create trigger backup</span><br><span class="line">  before delete on chat</span><br><span class="line">  for each row begin</span><br><span class="line">          insert into chatBackup(idBackup, answerBackup)</span><br><span class="line">          values(old.id, old.answer);</span><br><span class="line">    end |</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 트리거 확인</span><br><span class="line">show triggers;</span><br><span class="line"></span><br><span class="line"># 쿼리 실행</span><br><span class="line">delete from chat</span><br><span class="line">where id &#x3D; &quot;pigg&quot;</span><br><span class="line">limit 10;</span><br><span class="line"></span><br><span class="line"># 트리거가 실행되었는지 확인</span><br><span class="line">select * from chatBackup;</span><br></pre></td></tr></table></figure>

</div><div class="tags"><a href="/tags/js/"><i class="fa fa-tag"></i>js</a></div><div class="post-nav"><a class="pre" href="/2020/12/14/CRA%EC%9D%98%20%EC%9B%90%EB%A6%AC(babel,%20webpack%20%EB%B9%8C%EB%93%9C%ED%95%98%EA%B8%B0)/">CRA의 원리(babel, webpack 빌드하기)</a><a class="next" href="/2020/11/23/Mysql%20%EC%B2%AB%20%EC%88%98%EC%97%85%20%EC%A0%95%EB%A6%AC/">Mysql 첫 수업 정리</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://github.com/Kim-Jaemin420/Kim-Jaemin420.github.io.git"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/css/">css</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/html-css/">html & css</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/react/">react</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0%EC%99%80-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/">자료구조와 알고리즘</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B3%B5%ED%95%99-%EA%B8%B0%EB%B3%B8-%EC%A7%80%EC%8B%9D/">컴퓨터 공학 기본 지식</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/%EA%B8%B0%EC%B4%88-%EC%A7%80%EC%8B%9D/" style="font-size: 15px;">기초 지식</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/react/" style="font-size: 15px;">react</a> <a href="/tags/html/" style="font-size: 15px;">html</a> <a href="/tags/%EA%B8%B0%EC%B4%88%EC%A7%80%EC%8B%9D/" style="font-size: 15px;">기초지식</a> <a href="/tags/branch/" style="font-size: 15px;">branch</a> <a href="/tags/web-font/" style="font-size: 15px;">web font</a> <a href="/tags/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0%EC%99%80-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/" style="font-size: 15px;">자료구조와 알고리즘</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/12/14/CRA%EC%9D%98%20%EC%9B%90%EB%A6%AC(babel,%20webpack%20%EB%B9%8C%EB%93%9C%ED%95%98%EA%B8%B0)/">CRA의 원리(babel, webpack 빌드하기)</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/11/26/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A43/">데이터 베이스 Functions</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/11/23/Mysql%20%EC%B2%AB%20%EC%88%98%EC%97%85%20%EC%A0%95%EB%A6%AC/">Mysql 첫 수업 정리</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/11/12/%EC%BF%A0%ED%82%A4%EC%99%80%20%EC%84%B8%EC%85%98%20%EA%B0%9C%EB%85%90/">쿠키와 세션 개념</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/11/11/ajax%EB%A5%BC%20%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C%20todo-list%20%EB%AA%A9%EB%A1%9D%20%EC%B6%94%EA%B0%80:%EC%82%AD%EC%A0%9C:%EB%B3%80%EA%B2%BD%ED%95%98%EA%B8%B0/">ajax를 사용해서 todo-list 목록 추가:삭제:변경하기</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/11/10/SPA(Single%20Page%20Application)/">SPA(Single Page Application)</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/29/SignUpForm/">SignUpForm</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/28/checkbox/">checkbox</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/28/IINDEX/">IINDEX</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/26/app/">app</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">Jaime's blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>