<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Collapsing margins | Jaime's blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.0.2"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Collapsing margins</h1><a id="logo" href="/.">Jaime's blog</a><p class="description">Front end engineer</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Collapsing margins</h1><div class="post-meta">2020-07-21<span> | </span><span class="category"><a href="/categories/html-css/">html &amp; css</a></span></div><div class="post-content"><h1 id="마진-병합"><a href="#마진-병합" class="headerlink" title="마진 병합"></a>마진 병합</h1><p>CSS에서, A 상자의 margin-top과 B 상자의 margin-bottom이 하나의 마진으로 합쳐질 수 있다. 이렇게 합쳐진 마진은 병합된다고 한다.  </p>
<p>수직으로 인접한 마진은 병합된다. 단, 다음의 경우는 병합이 일어나지 않는다.  </p>
<ul>
<li><p>루트 요소 박스의 마진은 병합되지 않는다.    </p>
</li>
<li><blockquote>
<p>If the top and bottom margins of an element with <a target="_blank" rel="noopener" href="https://kim-jaemin420.github.io/2020/09/03/Clearance/">clearance</a> are adjoining, its margins collapse with the adjoining margins of following siblings but that resulting margin does not collapse with the bottom margin of the parent block.  </p>
</blockquote>
<p>이 한 문장을 해석하면,  </p>
<blockquote>
<p> clearance가 있는, 높이가 0인 A 박스의 마진 탑과 마진 바텀이 인접할 때, A 박스의 형제 요소와의 마진은 병합하지만 A 요소를 포함하는 부모 요소와의 마진 바텀은 병합되지 않는다.  </p>
</blockquote>
<p>이 문장의 표현이 굉장히 모호해서 오해를 불러일으키기 쉽다. 처음에 해석할 때 A상자와 B상자의 마진이 인접할때를 말하는 줄 알고 고생을 많이 했다.<br>그러던중, stack overflow에서 나와 같은 생각을 하는 글을 봤고 이게 높이가 0인 상자의 마진이 인접한 경우라는 것을 깨달았다.  </p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/19754939/css-2-1-spec-8-3-1-collapsing-margins-cannot-properly-interpret-special-case">stack overflow 해당 페이지</a> 이 글의 작성자에게 매우 감사함을 느꼈다.</p>
<p>또, 여기서 <a target="_blank" rel="noopener" href="https://kim-jaemin420.github.io/2020/09/03/Clearance/">clearance</a>가 무엇인지 의문을 가질 수 있는데 이 글은 마진 병합에 대한 설명글이기 때문에 다른 페이지에 작성해두었다. 링크를 클릭해 개념을 익히고 오자.  </p>
<p>자, 이제 이에 대한 예시를 살펴보자.  </p>
<p class="codepen" data-height="265" data-theme-id="dark" data-default-tab="css,result" data-user="jaime_jam" data-slug-hash="oNxovjg" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="with clearance인 경우 마진 병합">
<span>See the Pen <a target="_blank" rel="noopener" href="https://codepen.io/jaime_jam/pen/oNxovjg">
with clearance인 경우 마진 병합</a> by kimjaemin (<a target="_blank" rel="noopener" href="https://codepen.io/jaime_jam">@jaime_jam</a>)
on <a target="_blank" rel="noopener" href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>  

</li>
</ul>
<p>clearance가 있는 경우, 부모 블록과 병합되지 않는다.  </p>
<p>그렇다면 clearance가 없으면 부모 블록과 병합되는지 안되는지 확인해보자.  </p>
<p class="codepen" data-height="265" data-theme-id="dark" data-default-tab="css,result" data-user="jaime_jam" data-slug-hash="OJNxpOX" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="Clearance가 없는 경우에서 높이값 0인 상자 만들기">
  <span>See the Pen <a target="_blank" rel="noopener" href="https://codepen.io/jaime_jam/pen/OJNxpOX">
  Clearance가 없는 경우에서 높이값 0인 상자 만들기</a> by kimjaemin (<a target="_blank" rel="noopener" href="https://codepen.io/jaime_jam">@jaime_jam</a>)
  on <a target="_blank" rel="noopener" href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>  
이럴수가..! 병합된다. 분명 스펙에 따르면 clearance가 있으면 부모 블록과 병합되지 않는다고 했다. 무슨 문제인걸까?  
앞에서 해석 문제로 며칠을 고생하고 이번엔 이걸로 며칠을 고생했다.  
결론을 말하자면 크롬 문제이다.  

<p>파이어폭스, 사파리, 익스플로러에서 확인을 해봤다.  </p>
<img width="452" alt="파이어폭스, 사파리, 익스의 결과 화면" src="https://user-images.githubusercontent.com/61978339/92113098-c8e8ef00-ee29-11ea-9f88-c266361b0fa3.png">  

<p>모두 병합이 잘 된다. 제일 믿음직스러웠던 크롬이 이런 문제가 있다니.. 다른 브라우저에선 잘 작동하는 걸로 보아 크롬에서 뭔가 문제가 생긴듯하다.<br>아무리 크롬이여도 늘 의심하고 확인해보는 습관을 가져야겠다고 마음먹었다.<br>계속해서 마진 병합에 대해 설명해보자.  </p>
<p>수평적 마진, 즉 박스가 수평으로 놓일 때는 마진 병합이 절대 일어나지 않는다.  </p>
<p>다음과 같은 경우에만 두 상자의 마진이 병합될 수 있다.    </p>
<ul>
<li><p>둘 다 같은 BFC에 존재하는 블록 상자일 경우  </p>
</li>
<li><p>라인 박스, 간격, 패딩 및 경계선이 없을 경우<br><strong>두 개의 상자를 구분하는 일종의 경계선이 없어야 한다.</strong>  </p>
</li>
<li><p>둘 다 수직적으로 인접한 상자의 가장자리에 속해야 한다.  </p>
<ul>
<li>부모 상자의 위쪽 마진과 부모 상자의 첫 번째 자식 상자의 위쪽 마진  </li>
<li>두 개의 형제 상자의 위쪽 마진과 아래쪽 마진  </li>
<li>부모 상자의 높이값이 auto일 때, 부모 상자의 아래쪽 마진과 마지막 자식 상자의 아래쪽 마진  </li>
<li>어떤 상자 A의 min-height 속성값이 0이고, 경계선을 정하는 것들(보더, 패딩, 라인박스)이 없고, height 속성값이 0 혹은 auto이면 A 상자의 자식 마진(자식 요소가 있다면)은 병합된다.    </li>
</ul>
</li>
</ul>
<p><strong>인접 마진은 형제 요소나 부모 요소와 연관이 없더라도 생성될 수 있다.</strong>  </p>
<p><strong>1. float된 박스와 어떤 상자(any other box)간의 마진은 병합하지 않는다.</strong><br>  (float된 부모 상자와 그 자식 상자간에도 마진 병합은 일어나지 않는다.)  </p>
<p><strong>2. 새로운 BFC를 형성하는 박스와 그 자식 상자의 마진은 병합되지 않는다.</strong>  </p>
<p>예제를 통해 살펴보자.  </p>
<iframe height="265" style="width: 100%;" scrolling="no" title="qBZXLPG" src="https://codepen.io/jaime_jam/embed/qBZXLPG?height=265&theme-id=dark&default-tab=css,result" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a target="_blank" rel="noopener" href='https://codepen.io/jaime_jam/pen/qBZXLPG'>qBZXLPG</a> by kimjaemin
  (<a target="_blank" rel="noopener" href='https://codepen.io/jaime_jam'>@jaime_jam</a>) on <a target="_blank" rel="noopener" href='https://codepen.io'>CodePen</a>.
</iframe>  

<p>모든 상자가 normal flow 상태일 경우, 자식 요소인 child 상자에 margin-top 속성을 주면 마진이 병합된다.<br>그렇다면, parent 상자에 속성을 추가하여 새로운 BFC를 형성하도록 하면 어떻게 될까?  </p>
<p class="codepen" data-height="265" data-theme-id="dark" data-default-tab="css,result" data-user="jaime_jam" data-slug-hash="WNwELBz" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="WNwELBz">
  <span>See the Pen <a target="_blank" rel="noopener" href="https://codepen.io/jaime_jam/pen/WNwELBz">
  WNwELBz</a> by kimjaemin (<a target="_blank" rel="noopener" href="https://codepen.io/jaime_jam">@jaime_jam</a>)
  on <a target="_blank" rel="noopener" href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>  


<p>parent 박스에 <code>overflow:hidden;</code>을 사용해서 새로운 BFC를 형성했다.<br>그러자, 자식 요소인 child1 박스의 마진이 병합되지 않는 것을 알 수 있다. 그런데, child1과 child2의 마진은 병합된다.<br>왜 그럴까? 이 둘은 같은 BFC 위에 존재하기 때문에 병합된다.   </p>
<p><strong>3. absolutely positioned 상태의 박스의 마진은 겹치지 않는다.(자식박스의 마진과도 겹치지 않는다.)</strong>  </p>
<p>absolutely position 상태란, position 속성의 값이 absolute 이거나 fixed인 상태를 말한다.<br>예제를 통해 살펴보자.  </p>
<iframe height="265" style="width: 100%;" scrolling="no" title="qBZXLPG" src="https://codepen.io/jaime_jam/embed/qBZXLPG?height=265&theme-id=dark&default-tab=css,result" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a target="_blank" rel="noopener" href='https://codepen.io/jaime_jam/pen/qBZXLPG'>qBZXLPG</a> by kimjaemin
  (<a target="_blank" rel="noopener" href='https://codepen.io/jaime_jam'>@jaime_jam</a>) on <a target="_blank" rel="noopener" href='https://codepen.io'>CodePen</a>.
</iframe>  

<p>parent 박스는 position: fixed 상태로 margin-top 속성을 주어도 병합이 일어나지 않았고 자식 박스에서 margin-top을 주어도 병합없이 그대로 적용되는걸 알 수 있다.  </p>
<p><strong>4. inline-block 박스의 마진도 겹치지 않는다. (자식박스의 마진과도 겹치지 않는다.)</strong>  </p>
<p><strong>5. 블록 상자의 아래쪽 마진과 그 형제 요소의 위쪽 마진은 항상 겹친다. 그런데, 형제 요소가 clearance를 가지면 마진이 겹치지 않는다.</strong>  </p>
<p><strong>6. 블록 상자의 위쪽 마진과 첫 번째 자식 상자의 위쪽 마진은 겹친다. 단, 그 둘을 구분하는 경계선이 없어야 한다.(보더, 위쪽 패딩, 자식이 clearance가 없는 경우 등)</strong>  </p>
<p><strong>7. 박스의 마진은 병합된다.(자식의 마진 또한 병합된다.)</strong><br>언제? min-hieght 속성값이 0일때, 박스의 위쪽 아래쪽 보더나 패딩도 없을때, height 속성값이 0이나 auto 일때, 그리고 line box를 가지고 있지 않을때  </p>
<p>두 개 혹은 그 이상의 마진이 병합될때, 마진의 크기는 겹쳐지는 마진 값 중 가장 큰 값으로 결정된다. 음수 마진의 경우, 음수값을 가지는 마진의 절대값을 양수 마진값에서 뺀 값으로 결정된다. 만약, 둘 다 음수 값을 가지는 마진이라면 0에서 절대값이 가장 큰 마진을 뺀 값으로 결정된다.  </p>
<p>상자의 위쪽 및 아래쪽 여백이 인접하면 여백이 축소 될 수 있습니다.그것. 이 경우 요소의 위치는 여백이 축소되는 다른 요소와의 관계에 따라 달라집니다.</p>
<p>요소의 여백이 부모의 위쪽 여백과 함께 축소되면 상자의 위쪽 테두리 가장자리가 부모의 가장자리와 동일하게 정의됩니다.<br>그렇지 않으면 요소의 부모가 여백 축소에 참여하지 않거나 부모의 아래쪽 여백 만 포함됩니다. 요소의 위쪽 테두리 가장자리의 위치는 요소의 아래쪽 테두리가 0이 아닌 경우와 동일합니다.<br>축소 된 요소의 위치는 여백이 축소되는 다른 요소의 위치에 영향을주지 않습니다. 위쪽 테두리 가장자리 위치는 이러한 요소의 하위 항목을 배치하는 데만 필요합니다.</p>
</div><div class="tags"></div><div class="post-nav"><a class="pre" href="/2020/07/21/Flex/">Flex</a><a class="next" href="/2020/07/20/CSS%20Attribute%20Selector/">CSS Attribute Selector</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://github.com/Kim-Jaemin420/Kim-Jaemin420.github.io.git"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/css/">css</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/html-css/">html & css</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B3%B5%ED%95%99-%EA%B8%B0%EB%B3%B8-%EC%A7%80%EC%8B%9D/">컴퓨터 공학 기본 지식</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/%EA%B8%B0%EC%B4%88-%EC%A7%80%EC%8B%9D/" style="font-size: 15px;">기초 지식</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/html/" style="font-size: 15px;">html</a> <a href="/tags/%EA%B8%B0%EC%B4%88%EC%A7%80%EC%8B%9D/" style="font-size: 15px;">기초지식</a> <a href="/tags/branch/" style="font-size: 15px;">branch</a> <a href="/tags/web-font/" style="font-size: 15px;">web font</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/10/06/Execution%20context/">Execution context</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/05/Buillt-in%20objects/">Buillt-in objects</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/02/Strict%20mode/">Strict mode</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/02/this/">this</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/09/28/sd/">sd</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/09/28/Prototype/">Prototype</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/09/25/%EC%83%9D%EC%84%B1%EC%9E%90%20%ED%95%A8%EC%88%98/">생성자 함수</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/09/22/app/">app</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/09/21/%EA%B0%9D%EC%B2%B4%20%ED%94%84%EB%A1%9C%ED%8D%BC%ED%8B%B0%20%EC%84%A0%ED%83%9D%EC%97%90%20%EB%8C%80%ED%95%9C%20%EC%98%88%EC%A0%9C/">객체 프로퍼티 선택에 대한 예제</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/09/17/practice/">practice</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">Jaime's blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>